-# This file is app/views/teacher/index.html.haml
!!! 5

- content_for :title, room_index_heading(@filter)

.row
  .span12.module
    %ul.module-heading-tabs
      %li.module-heading-tab{active_if(@filter.empty?)}
        = link_to "All", semester_teachers_path(@semester)
      %li.module-heading-tab{active_if(@filter[:active] == 'true')}
        = link_to "Active", semester_teachers_path(@semester, :filter_active => "true")
      %li.module-heading-tab{active_if(@filter[:active] == 'false')}
        = link_to "Inactive", semester_teachers_path(@semester, :filter_active => "false")
      %li.module-heading-action
        = link_to "+ Add New Room", new_semester_teacher_path
    %h3.print-heading-sub
      = room_index_heading(@filter)

    .module-content
      %table.data-table.full-width#rooms
        %thead
          %tr
            %td
              Classroom
            %td
              Teacher
            %td
              Grade
            %td.action
        %tbody
          - if !@teachers.empty?
            - @teachers.each do |teacher|
              %tr
                %td
                  = link_to teacher.classroom, teacher_path(teacher)
                %td
                  = link_to teacher.name, teacher_path(teacher)
                %td
                  = teacher.grade
                %td.action
                  = link_to edit_teacher_path(teacher), :class => "edit-delete" do
                    %i.icon-pencil
                  - if teacher.can_be_deleted?
                    = link_to teacher_path(teacher), :method => :delete, :class => "edit-delete",
                      :data => { :confirm => "Are you sure you want to delete #{teacher.classroom}?" } do
                      %i.icon-trash
                  - else
                    %span.referenced-tooltip{"data-original-title"=>"Referenced by one or more courses or students. Remove the teacher from all referencing courses and students to delete."}
                      %i.icon-trash
          - else
            %tr
              %td.centered(colspan=4)   
                None
                                             
- content_for :js do
  :javascript
    $(function() {
      $("span.referenced-tooltip").tooltip();
    });
